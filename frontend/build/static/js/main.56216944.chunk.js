(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{130:function(e,t,a){},142:function(e,t,a){},196:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},342:function(e,t,a){},349:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),o=a(26),s=a.n(o),r=(a(196),a(130),a(6)),l=(a(54),a(31),a(43),a(72),a(49),a(73),a(142),a(1));function i(e){var t=e.href,a=e.dataIcon,c=e.text,n=e.d,o=e.className,s=e.viewBox;return Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsxs)("a",{href:t,className:"nav-link-main",children:[Object(l.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":a,className:"svg-inline--fa ".concat(o),role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:s,children:Object(l.jsx)("path",{fill:"currentColor",d:n})}),Object(l.jsx)("span",{className:"link-text",children:c})]})})}i.defaultProps={href:"home",dataIcon:"house",text:"Accueil",d:"M575.8 255.5C575.8 273.5 560.8 287.6 543.8 287.6H511.8L512.5 447.7C512.5 450.5 512.3 453.1 512 455.8V472C512 494.1 494.1 512 472 512H456C454.9 512 453.8 511.1 452.7 511.9C451.3 511.1 449.9 512 448.5 512H392C369.9 512 352 494.1 352 472V384C352 366.3 337.7 352 320 352H256C238.3 352 224 366.3 224 384V472C224 494.1 206.1 512 184 512H128.1C126.6 512 125.1 511.9 123.6 511.8C122.4 511.9 121.2 512 120 512H104C81.91 512 64 494.1 64 472V360C64 359.1 64.03 358.1 64.09 357.2V287.6H32.05C14.02 287.6 0 273.5 0 255.5C0 246.5 3.004 238.5 10.01 231.5L266.4 8.016C273.4 1.002 281.4 0 288.4 0C295.4 0 303.4 2.004 309.5 7.014L564.8 231.5C572.8 238.5 576.9 246.5 575.8 255.5L575.8 255.5z",className:"fa-house",viewBox:"0 0 576 512"};var d=i;var b=function(){return Object(l.jsx)("nav",{className:"navbar-main",children:Object(l.jsxs)("ul",{className:"navbar-nav",children:[Object(l.jsx)(d,{href:"home",dataIcon:"house",text:"Accueil",className:"fa-house",viewBox:"0 0 576 512",d:"M575.8 255.5C575.8 273.5 560.8 287.6 543.8 287.6H511.8L512.5 447.7C512.5 450.5 512.3 453.1 512 455.8V472C512 494.1 494.1 512 472 512H456C454.9 512 453.8 511.1 452.7 511.9C451.3 511.1 449.9 512 448.5 512H392C369.9 512 352 494.1 352 472V384C352 366.3 337.7 352 320 352H256C238.3 352 224 366.3 224 384V472C224 494.1 206.1 512 184 512H128.1C126.6 512 125.1 511.9 123.6 511.8C122.4 511.9 121.2 512 120 512H104C81.91 512 64 494.1 64 472V360C64 359.1 64.03 358.1 64.09 357.2V287.6H32.05C14.02 287.6 0 273.5 0 255.5C0 246.5 3.004 238.5 10.01 231.5L266.4 8.016C273.4 1.002 281.4 0 288.4 0C295.4 0 303.4 2.004 309.5 7.014L564.8 231.5C572.8 238.5 576.9 246.5 575.8 255.5L575.8 255.5z"}),Object(l.jsx)(d,{href:"cameras",dataIcon:"video",text:"Cam\xe9ras",className:"fa-video",viewBox:"0 0 576 512",d:"M384 112v288c0 26.51-21.49 48-48 48h-288c-26.51 0-48-21.49-48-48v-288c0-26.51 21.49-48 48-48h288C362.5 64 384 85.49 384 112zM576 127.5v256.9c0 25.5-29.17 40.39-50.39 25.79L416 334.7V177.3l109.6-75.56C546.9 87.13 576 102.1 576 127.5z"}),Object(l.jsx)(d,{href:"grades",dataIcon:"chart-bar",text:"Grades",className:"fa-chart-bar",viewBox:"0 0 512 512",d:"M140.8 160h230.5C377.6 160 384 153.6 384 147.3v-38.5C384 102.4 377.6 96 371.3 96h-230.5C134.4 96 128 102.4 128 108.8v38.5C128 153.6 134.4 160 140.8 160zM140.8 256h166.5C313.6 256 320 249.6 320 243.3v-38.5C320 198.4 313.6 192 307.3 192h-166.5C134.4 192 128 198.4 128 204.8v38.5C128 249.6 134.4 256 140.8 256zM140.8 352h294.5C441.6 352 448 345.6 448 339.3v-38.5C448 294.4 441.6 288 435.3 288h-294.5C134.4 288 128 294.4 128 300.8v38.5C128 345.6 134.4 352 140.8 352zM480 416H64V63.1C64 46.33 49.67 32 32 32S0 46.33 0 63.1V448c0 17.6 14.4 32 32 32h448C497.7 480 512 465.7 512 448S497.7 416 480 416z"}),Object(l.jsx)(d,{href:"members",dataIcon:"users",text:"Membres",className:"fa-users",viewBox:"0 0 640 512",d:"M319.9 320c57.41 0 103.1-46.56 103.1-104c0-57.44-46.54-104-103.1-104c-57.41 0-103.1 46.56-103.1 104C215.9 273.4 262.5 320 319.9 320zM369.9 352H270.1C191.6 352 128 411.7 128 485.3C128 500.1 140.7 512 156.4 512h327.2C499.3 512 512 500.1 512 485.3C512 411.7 448.4 352 369.9 352zM512 160c44.18 0 80-35.82 80-80S556.2 0 512 0c-44.18 0-80 35.82-80 80S467.8 160 512 160zM183.9 216c0-5.449 .9824-10.63 1.609-15.91C174.6 194.1 162.6 192 149.9 192H88.08C39.44 192 0 233.8 0 285.3C0 295.6 7.887 304 17.62 304h199.5C196.7 280.2 183.9 249.7 183.9 216zM128 160c44.18 0 80-35.82 80-80S172.2 0 128 0C83.82 0 48 35.82 48 80S83.82 160 128 160zM551.9 192h-61.84c-12.8 0-24.88 3.037-35.86 8.24C454.8 205.5 455.8 210.6 455.8 216c0 33.71-12.78 64.21-33.16 88h199.7C632.1 304 640 295.6 640 285.3C640 233.8 600.6 192 551.9 192z"}),Object(l.jsx)(d,{href:"pictures",dataIcon:"image",text:"Galerie",className:"fa-image",viewBox:"0 0 512 512",d:"M152 120c-26.51 0-48 21.49-48 48s21.49 48 48 48s48-21.49 48-48S178.5 120 152 120zM447.1 32h-384C28.65 32-.0091 60.65-.0091 96v320c0 35.35 28.65 64 63.1 64h384c35.35 0 64-28.65 64-64V96C511.1 60.65 483.3 32 447.1 32zM463.1 409.3l-136.8-185.9C323.8 218.8 318.1 216 312 216c-6.113 0-11.82 2.768-15.21 7.379l-106.6 144.1l-37.09-46.1c-3.441-4.279-8.934-6.809-14.77-6.809c-5.842 0-11.33 2.529-14.78 6.809l-75.52 93.81c0-.0293 0 .0293 0 0L47.99 96c0-8.822 7.178-16 16-16h384c8.822 0 16 7.178 16 16V409.3z"})]})})},j=a(99),m=(a(143),a(16)),u=a(9),h=a(13),f=a(70),p=a(21),O=a(20),x=a(36),g=a.n(x),v=g.a.create({baseURL:"http://localhost:8080",headers:{"Content-type":"application/json"}}),y=new(function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"upload",value:function(e,t){var a=new FormData;return a.append("file",e),v.post("/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}},{key:"getFiles",value:function(){return v.get("/files")}}]),e}()),N=function(e){Object(p.a)(a,e);var t=Object(O.a)(a);function a(e){var c;return Object(u.a)(this,a),(c=t.call(this,e)).selectFiles=c.selectFiles.bind(Object(f.a)(c)),c.upload=c.upload.bind(Object(f.a)(c)),c.uploadFiles=c.uploadFiles.bind(Object(f.a)(c)),c.previewImages=[],c.state={selectedFiles:void 0,progressInfos:[],message:[],fileInfos:[]},c}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.getFiles().then((function(t){e.setState({fileInfos:t.data})}))}},{key:"selectFiles",value:function(e){this.setState({progressInfos:[],selectedFiles:e.target.files})}},{key:"upload",value:function(e,t){var a=this,c=Object(m.a)(this.state.progressInfos);y.upload(t,(function(t){c[e].percentage=Math.round(100*t.loaded/t.total),a.setState({_progressInfos:c})})).then((function(e){return a.setState((function(e){return{message:[].concat(Object(m.a)(e.message),["Uploaded the file successfully: "+t.name])}})),y.getFiles()})).then((function(e){a.setState({fileInfos:e.data})})).catch((function(){c[e].percentage=0,a.setState((function(e){var a=[].concat(Object(m.a)(e.message),["Could not upload the file: "+t.name]);return{progressInfos:c,message:a}}))}))}},{key:"uploadFiles",value:function(e){var t=this;e.preventDefault();for(var a=this.state.selectedFiles,c=[],n=0;n<a.length;n++)c.push({percentage:0,fileName:a[n].name});this.setState({progressInfos:c,message:[]},(function(){for(var e=0;e<a.length;e++)t.upload(e,a[e])}))}},{key:"render",value:function(){var e=this.state,t=e.selectedFiles,a=(e.previewImages,e.progressInfos),c=e.message;e.fileInfos;return Object(l.jsxs)("div",{children:[a&&a.map((function(e,t){return Object(l.jsxs)("div",{className:"mb-2",children:[Object(l.jsx)("span",{children:e.fileName}),Object(l.jsx)("div",{className:"progress",children:Object(l.jsxs)("div",{className:"progress-bar progress-bar-info",role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100",style:{width:e.percentage+"%"},children:[e.percentage,"%"]})})]},t)})),Object(l.jsxs)("div",{className:"row my-3",children:[Object(l.jsx)("div",{className:"col-8",children:Object(l.jsx)("label",{className:"btn btn-default p-0",children:Object(l.jsx)("input",{type:"file",multiple:!0,onChange:this.selectFiles})})}),Object(l.jsx)("div",{className:"col-4",children:Object(l.jsx)("button",{className:"btn btn-success btn-sm",disabled:!t,onClick:this.uploadFiles,type:"submit",children:"Enregistrer"})})]}),c.length>0&&Object(l.jsx)("div",{className:"alert alert-secondary",role:"alert",children:Object(l.jsx)("ul",{children:c.map((function(e,t){return Object(l.jsx)("li",{children:e},t)}))})})]})}}]),a}(c.Component),C=function(e){var t=e.type,a=e.name,c=e.min,n=e.max,o=e.placeholder,s=e.setFunc,r=e.pattern,i=e.title,d=e.step,b=e.idName;return Object(l.jsx)("input",{className:"input_modif",id:b,step:d,pattern:r,required:!0,title:i,type:t,name:a,minLength:c,maxLength:n,placeholder:o,onChange:function(e){s(e.target.value)}})};C.defaultProps={type:"text",min:4,max:10,placeholder:"texte"};var w=C;function k(){g.a.defaults.withCredentials=!0;var e=Object(c.useState)(""),t=Object(r.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(""),s=Object(r.a)(o,2),i=s[0],d=s[1],m=Object(c.useState)(1),u=Object(r.a)(m,2),h=u[0],f=u[1],p=Object(c.useState)([]),O=Object(r.a)(p,2),x=O[0],v=O[1],y=Object(c.useState)([]),C=Object(r.a)(y,2),k=C[0],S=C[1],_=Object(c.useState)(""),T=Object(r.a)(_,2),M=(T[0],T[1],Object(c.useState)("")),z=Object(r.a)(M,2),I=z[0],E=z[1],G=Object(c.useState)("Tous"),F=Object(r.a)(G,2),L=F[0],B=F[1];Object(c.useEffect)((function(){V(),A()}),[]);var A=function(){fetch("/api/members",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){S(e)}))},V=function(){g.a.get("http://localhost:3001/api/gradesInfos").then((function(e){v(e.data)})).then((function(){}))};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b,{}),Object(l.jsxs)("div",{className:"rounded row mt-2 justify-content-center",children:[Object(l.jsx)("div",{className:"col-4",children:Object(l.jsx)("input",{style:{border:"1px solid grey"},type:"text",onChange:function(e){E(e.target.value)},placeholder:"chercher"})}),Object(l.jsxs)("select",{onChange:function(e){return B(e.target.value)},style:{width:"20%"},className:"form-select form-select-sm","aria-label":"Default select example",children:[Object(l.jsx)("option",{children:"Tous"}),x.map((function(e){return Object(l.jsx)("option",{children:e.name_grade})}))]})]}),Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"row offset-1 justify-content-center",children:[Object(l.jsxs)(j.a,{trigger:Object(l.jsx)("button",{style:{backgroundColor:"#c6e5c3",border:"1px solid lightgrey"},className:"rounded col-sm-3 col-lg-3 mt-4 mb-5",children:"Ajouter utilisateur (+)"}),position:"center",modal:!0,nested:!0,children:[Object(l.jsx)("h1",{children:"Nouvel utilisateur:"}),Object(l.jsxs)("form",{onSubmit:function(){g.a.put("http://localhost:3001/api/client",{FirstName:a,LastName:i,Grade:h}).then((function(e){e&&window.alert("Client d\xe9j\xe0 enregistr\xe9")}))},children:[Object(l.jsx)("label",{for:"f-name",children:"Pr\xe9nom:"}),Object(l.jsx)("br",{}),Object(l.jsx)(w,{name:"f-name",idName:"f-name",max:"50",min:"1",type:"texte",placeholder:"Pr\xe9nom",setFunc:n}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{for:"l-name",children:"Nom:"}),Object(l.jsx)("br",{}),Object(l.jsx)(w,{name:"l-name",idName:"l-name",max:"50",min:"1",type:"texte",placeholder:"Nom",setFunc:d}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{for:"grade",children:"Grade:"}),Object(l.jsx)("br",{}),Object(l.jsx)("select",{required:!0,onChange:function(e){f(e.target.value)},name:"grade",children:x.map((function(e){return Object(l.jsxs)("option",{value:e.id_grade,children:[e.id_grade+". ",e.name_grade]})}))}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",children:"Envoyer"}),Object(l.jsx)(N,{})]})]}),k.filter((function(e){return e.first_name.includes(I)})).filter("Tous"!==L?function(e){return e.name_grade===L}:function(e){return e.name_grade.includes("")}).map((function(e){return Object(l.jsx)("div",{className:"rounded col-sm-5 col-lg-3 p-4 mx-1 mb-3 ","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:Object(l.jsxs)("div",{className:"row rounded",children:[Object(l.jsx)("div",{style:{backgroundColor:e.color,fontSize:"0.7rem"},className:"col-6",children:e.name_grade}),Object(l.jsx)("div",{style:{backgroundColor:e.color},className:"col-6",children:Object(l.jsx)("button",{className:"p-2 btn-close btn-close-grey float-end",id:e.id_member,onClick:function(t){window.confirm("Voulez vous vraiment supprimer "+e.last_name+"?")&&function(e){var t=e;g.a.delete("http://localhost:3001/api/members/".concat(t)).then((function(e){e&&window.location.reload()}))}(t.target.id)}})}),Object(l.jsxs)("div",{style:{backgroundColor:"#ebebeb"},className:"rounded col-12",children:[Object(l.jsx)("div",{class:"col-md-4 text-align",children:Object(l.jsx)("img",{src:"https://as2.ftcdn.net/v2/jpg/03/32/59/65/1000_F_332596535_lAdLhf6KzbW6PWXBWeIFTovTii1drkbT.jpg",class:"img-fluid rounded-start",alt:"profile-pic"})}),e.first_name," ",e.last_name]})]})})}))]})})]})}var S=a(68),_=a(15),T=(a(37),function(e){var t=e.name,a=e.color,c=e.members,n=e.allowed_camera,o=e.refused_camera;return Object(l.jsx)("div",{className:"row p-1 justify-content-center card-grade",children:Object(l.jsxs)("div",{type:"button",className:"p-1 bg-light shadow-sm rounded row col-10 col-md-9 col-lg-7 col-xl-6","data-bs-toggle":"modal","data-bs-target":"#gradeModal",children:[Object(l.jsx)("div",{className:"rounded bg-person col-12 col-sm-3",style:{backgroundColor:a},children:Object(l.jsx)("i",{className:"bi bi-people icon-person"})}),Object(l.jsx)("div",{className:"align-self-center name-grade col-8 col-sm-6",children:t}),Object(l.jsxs)("div",{className:"layout-nbr-camera p-0 col align-self-end row col-4 col-sm-3",children:[Object(l.jsxs)("div",{className:"p-0 informations col-6",children:[n," ",Object(l.jsx)("i",{className:"bi bi-camera-video-fill allowed-camera"})]}),Object(l.jsxs)("div",{className:"p-0 informations col-6",children:[o," ",Object(l.jsx)("i",{className:"bi bi-camera-video-fill refused-camera"})]}),Object(l.jsxs)("div",{className:"p-0 informations col-12",children:[c," ",c>1?"membres":"membre"]})]})]})})}),M=a(190),z=function(e){var t=e.id,a=e.className,c=e.text,n=e.targetToggle,o=e.dataToggle,s=e.dataDismiss,r=e.ariaLabel,i=e.func1,d=e.param1,b=e.func2,j=e.param2;return void 0===i?Object(l.jsx)("button",{type:"button",id:t,className:"btn modal-button col-11 col-sm-5 ".concat(a),"data-bs-target":n,"data-bs-toggle":o,"data-bs-dismiss":s,"aria-label":r,children:c}):void 0===b?Object(l.jsx)("button",{type:"button",id:t,className:"btn modal-button col-11 col-sm-5 ".concat(a),"data-bs-target":n,"data-bs-toggle":o,"data-bs-dismiss":s,"aria-label":r,onClick:function(){i(d)},children:c}):Object(l.jsx)("button",{type:"button",id:t,className:"btn modal-button col-11 col-sm-5 ".concat(a),"data-bs-target":n,"data-bs-toggle":o,"data-bs-dismiss":s,"aria-label":r,onClick:function(){i(d),b(j)},children:c})},I=function(e){var t=e.nameGrade,a=e.borderGrade,n=e.colorGrade,o=e.idColorGrade,s=e.colors,i=e.errorName,d=e.errorColor,b=e.setNameGrade,j=e.resetCreation,m=e.createGrade,u=e.chooseColor,h=Object(c.useState)("red"),f=Object(r.a)(h,2),p=f[0],O=f[1],x=Object(c.useState)(!1),g=Object(r.a)(x,2),v=g[0],y=g[1];return Object(l.jsx)("div",{id:"addGradeModal",className:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"addGradeModalLabel","aria-hidden":"true",children:Object(l.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",children:Object(l.jsxs)("div",{className:"modal-content",children:[Object(l.jsx)("div",{className:"modal-header row",children:Object(l.jsx)("h5",{className:"modal-title p-1 col-sm-8 offset-sm-2",id:"addGradeModalLabel",children:"Ajouter un grade"})}),Object(l.jsx)("div",{className:"modal-body",children:Object(l.jsx)("div",{className:"container-fluid",children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("div",{className:"col-12 col-md-6 order-1",children:[Object(l.jsx)("div",{className:"frame-grade-label p-0 m-1 col-11",children:Object(l.jsx)("label",{id:"name-grade-label",className:"col-form-label",for:"name-grade",children:"Nom"})}),Object(l.jsx)("div",{id:"frame-name-grade-input",className:"p-0 m-1 col-10",children:Object(l.jsx)("input",{type:"text",id:"name-grade",className:" form-control",maxlength:"10",value:t,style:{border:a},onChange:function(e){b(e.target.value)}})})]}),Object(l.jsxs)("div",{className:"col-12 col-md-6 order-3 order-md-2",children:[Object(l.jsx)("div",{className:"frame-grade-label p-0 m-1 col-11",children:Object(l.jsx)("label",{id:"color-grade-label",for:"color-grade",className:"col-form-label",children:"Couleur"})}),Object(l.jsxs)("div",{id:"frame-colors",className:"row p-0 m-0 rounded col-11",children:[Object(l.jsx)("div",{className:"container-final-color col-12",children:Object(l.jsx)("i",{id:o,className:"bi bi-square-fill final-color",style:{color:n,fontSize:"175%"}})}),s&&s.map((function(e){return Object(l.jsx)("div",{className:"container-choosing-color col-1",children:Object(l.jsx)("i",{type:"button",id:"little-square-".concat(e.id_color),className:"bi bi-square-fill ".concat(e.id_color),style:{color:e.name_color},onClick:function(){!function(e){document.head.appendChild(document.createElement("style")).innerHTML="#little-square-".concat(e,":before {border:1px solid var(--frame-choice-color); border-radius:4px;}");var t=document.head.appendChild(document.createElement("style")),a=o;t.innerHTML="#little-square-".concat(a,":before {border:none;}")}(e.id_color),u(e.id_color,e.name_color)}})})})),Object(l.jsxs)("div",{className:"container-choosing-color col-1",children:[Object(l.jsx)("i",{type:"button",className:"bi bi-plus-square square-selection",style:{color:p},onClick:function(){return y((function(e){return!e}))}}),v&&Object(l.jsx)(M.a,{color:p,onChange:function(e){return O(e.hex)}})]})]})]}),Object(l.jsx)("div",{id:"error-name",className:"errorMessage col-12 col-md-6 order-2 order-md-3",children:i}),Object(l.jsx)("div",{id:"error-color",className:"errorMessage col-12 col-md-6 order-4",children:d})]})})}),Object(l.jsxs)("div",{className:"modal-footer row justify-content-between",children:[Object(l.jsx)(z,{id:"cancel-creation",className:"bouton-close",text:"Annuler",dataDismiss:"modal",ariaLabel:"Close",func1:j}),Object(l.jsx)(z,{className:"bouton-action",text:"Cr\xe9er",func1:m})]})]})})})},E=function(e){var t=e.name_camera,a=e.id_camera,c=e.notification,n=e.changeAction,o=e.changeNotification,s=e.allowed,r=e.currentIdGrade;return Object(l.jsxs)("div",{className:"layout-actions-cameras row p-1 m-2 bg-light rounded col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12",children:[Object(l.jsx)("div",{className:"name-camera-grade col-7 col-sm-7 col-md-7 col-lg-7 col-xl-7 col-xxl-7",children:t}),Object(l.jsx)("div",{className:"switch-camera-grade col-3 col-sm-3 col-md-3 col-lg-3 col-xl-3 col-xxl-3",children:Object(l.jsx)("div",{className:"form-check form-switch",children:s?Object(l.jsx)("input",{type:"checkbox",className:"form-check-input input-switch action-".concat(r,"-").concat(a),defaultChecked:!0,role:"switch",onChange:function(){return n(a)}}):Object(l.jsx)("input",{type:"checkbox",className:"form-check-input input-switch action-".concat(r,"-").concat(a),role:"switch",onChange:function(){return n(a)}})})}),Object(l.jsx)("div",{className:"rounded col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xxl-2",children:Object(l.jsx)("i",{type:"button",id:"notification-".concat(r,"-").concat(a),className:"bi bi-bell-slash-fill",onClick:function(){return o(a,c)}})})]})},G=function(e){var t=e.id,a=e.bgColor,c=e.text;return Object(l.jsx)("div",{className:"modal-header row justify-content-center",children:Object(l.jsx)("h5",{id:t,className:"modal-title p-1 shadow-sm rounded col-10 col-sm-11 col-lg-9",style:{backgroundColor:a},children:c})})},F=function(e){var t=e.currentGrade,a=e.currentColor,c=e.informationsCameras,n=e.currentIdGrade,o=e.saveAction,s=e.newNotifications,r=e.newActions,i=e.activateButton,d=function(e,t){e in s?(document.getElementById("notification-"+n+"-"+e).className=t?"bi bi-bell-fill":"bi bi-bell-slash-fill",delete s[e]):(document.getElementById("notification-"+n+"-"+e).className=t?"bi bi-bell-slash-fill":"bi bi-bell-fill",s[e]=!t)},b=function(e){var t=document.getElementsByClassName("action-"+n+"-"+e)[0].checked;e in r?delete r[e]:r[e]=t};return Object(l.jsx)("div",{id:"modifyGradeModal",className:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"modifyGradeModalLabel","aria-hidden":"true",children:Object(l.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",children:Object(l.jsxs)("div",{className:"modal-content",children:[Object(l.jsx)(G,{id:"gradeModalLabel",bgColor:a,text:t}),Object(l.jsx)("div",{className:"modal-body",children:Object(l.jsxs)("div",{className:"row justify-content-around",children:[Object(l.jsx)("div",{className:"row justify-content-center col-11 col-lg-6",children:c&&c.filter((function(e){return c.indexOf(e)<c.length/2})).map((function(e){return Object(l.jsx)(E,{name_camera:e.name_camera,id_camera:e.id_camera,notification:e.notification,changeAction:b,changeNotification:d,allowed:e.allowed,currentIdGrade:n})}))}),Object(l.jsx)("div",{className:"row justify-content-center col-11 col-lg-6",children:c&&c.filter((function(e){return c.indexOf(e)>=c.length/2})).map((function(e){return Object(l.jsx)(E,{name_camera:e.name_camera,id_camera:e.id_camera,notification:e.notification,changeAction:b,changeNotification:d,allowed:e.allowed,currentIdGrade:n})}))})]})}),Object(l.jsxs)("div",{className:"modal-footer row justify-content-between",children:[Object(l.jsx)(z,{className:"bouton-close",text:"Annuler",func1:function(){i("close-modify"),Object.keys(r).length>0||Object.keys(s).length>0?i("open-confirmation"):i("open-desc-grade-1")}}),Object(l.jsx)(z,{id:"open-desc-grade-1",className:"hidden-btn bouton-close",text:"Revenir desc grade",targetToggle:"#gradeModal",dataToggle:"modal"}),Object(l.jsx)(z,{id:"close-modify",className:"hidden-btn bouton-close",text:"Fermer",dataDismiss:"modal",ariaLabel:"Close"}),Object(l.jsx)(z,{id:"open-confirmation",className:"hidden-btn bouton-close",text:"Cancel",targetToggle:"#confirmationCancelModal",dataToggle:"modal"}),Object(l.jsx)(z,{className:"bouton-action",text:"Enregistrer",func1:o})]})]})})})},L=function(e){var t=e.activateButton,a=e.deleteModification;return Object(l.jsx)("div",{id:"confirmationCancelModal",className:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"confirmationCancelModalLabel","aria-hidden":"true",children:Object(l.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",children:Object(l.jsxs)("div",{className:"modal-content",children:[Object(l.jsx)("div",{className:"modal-body",children:Object(l.jsxs)("div",{className:"layout-modal-cancel row justify-content-center container",children:[Object(l.jsx)("i",{id:"icon-cancel",className:"bi bi-x-circle"}),Object(l.jsx)("h4",{children:"Voulez-vous vraiment annuler ? "}),Object(l.jsx)("p",{children:"Toutes vos modifications seront perdues."})]})}),Object(l.jsxs)("div",{className:"modal-footer row justify-content-between",children:[Object(l.jsx)(z,{className:"bouton-close",text:"Non",func1:t,param1:"close-cancel",func2:t,param2:"open-modify-grade"}),Object(l.jsx)(z,{id:"open-desc-grade-2",className:"hidden-btn bouton-close",text:"Revenir desc grade",targetToggle:"#gradeModal",dataToggle:"modal"}),Object(l.jsx)(z,{id:"open-modify-grade",className:"hidden-btn bouton-close",text:"Revenir modif grades",targetToggle:"#modifyGradeModal",dataToggle:"modal"}),Object(l.jsx)(z,{id:"close-cancel",className:"hidden-btn bouton-close",text:"Fermer tout",dataDismiss:"modal",ariaLabel:"Close"}),Object(l.jsx)(z,{className:"bouton-warning",text:"Oui",func1:a})]})]})})})},B=function(e){var t=e.name,a=e.allowed,c=e.notification;return Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{type:"button",class:"btn btn-primary","data-toggle":"modal","data-target":"#popUp","data-whatever":"@mdo",children:"X"}),Object(l.jsxs)("div",{className:"row align-items-center p-1 m-2 bg-light rounded col-10 col-lg-7",id:"popUp",children:[Object(l.jsx)("div",{className:"name-camera-grade col-9",children:t}),Object(l.jsx)("div",{className:"bg-notification rounded col-3 col-lg-2",style:{backgroundColor:a?"var(--camera-allow)":"var(--camera-refuse)"},children:Object(l.jsx)("i",{className:"bi bi-bell icon-notification",style:{color:c?"white":a?"var(--camera-allow)":"var(--camera-refuse)"}})})]})]})},A=function(e){var t=e.informationsCameras,a=e.colorModalDetails,c=e.titleModalDetails,n=e.activateButton,o=e.resetModal;return Object(l.jsx)("div",{id:"gradeModal",className:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"gradeModalLabel","aria-hidden":"true",children:Object(l.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",children:Object(l.jsxs)("div",{className:"modal-content",children:[Object(l.jsx)(G,{id:"gradeModalLabel",bgColor:a,text:c}),Object(l.jsxs)("div",{className:"modal-body",children:[Object(l.jsx)("div",{className:"row justify-content-center",children:Object(l.jsxs)("div",{className:"layout-legend col-10 col-lg-9",children:[Object(l.jsxs)("div",{className:"col-12",children:[Object(l.jsx)("i",{className:"bi bi-square-fill",style:{color:"var(--camera-allow)",fontSize:"0.95rem"}})," : acc\xe8s autoris\xe9s"]}),Object(l.jsxs)("div",{className:"col-12",children:[Object(l.jsx)("i",{className:"bi bi-square-fill",style:{color:"var(--camera-refuse)",fontSize:"0.95rem"}})," : acc\xe8s refus\xe9s"]}),Object(l.jsxs)("div",{className:"col-12",style:{margin:"0.3rem 0rem 0rem 0rem"},children:[Object(l.jsx)("i",{className:"bi bi-bell icon-notification",style:{fontSize:"0.7rem",backgroundColor:"#7a7a7a",color:"white",padding:"0.0375rem 0.15rem 0.0375rem 0.15rem",borderRadius:"4px"}})," : activation d'une alerte de pr\xe9sence"]})]})}),Object(l.jsx)("div",{className:"row justify-content-center",children:t&&t.map((function(e){return Object(l.jsx)(B,{allowed:e.allowed,name:e.name_camera,notification:e.notification},"prop-".concat(e.id_permission))}))})]}),Object(l.jsxs)("div",{className:"modal-footer row justify-content-between",children:[Object(l.jsx)(z,{id:"close-informations",className:"bouton-close",text:"Fermer",dataDismiss:"modal",ariaLabel:"Close"}),Object(l.jsx)(z,{className:"bouton-action",text:"Modifier",targetToggle:"#modifyGradeModal",dataToggle:"modal",func1:n,param1:"close-informations",func2:o})]})]})})})};var V=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(null),s=Object(r.a)(o,2),i=s[0],d=s[1],b=Object(c.useState)([]),j=Object(r.a)(b,2),m=j[0],u=j[1],h=Object(c.useState)(""),f=Object(r.a)(h,2),p=f[0],O=f[1],x=Object(c.useState)(""),g=Object(r.a)(x,2),v=g[0],y=g[1],N=Object(c.useState)(""),C=Object(r.a)(N,2),w=C[0],k=C[1],M=Object(c.useState)("var(--empty-color)"),z=Object(r.a)(M,2),E=z[0],G=z[1],B=Object(c.useState)("empty"),V=Object(r.a)(B,2),H=V[0],P=V[1],q=Object(c.useState)(""),D=Object(r.a)(q,2),U=D[0],J=D[1],R=Object(c.useState)(""),W=Object(r.a)(R,2),X=W[0],K=W[1],Q=Object(c.useState)(""),Y=Object(r.a)(Q,2),Z=Y[0],$=Y[1],ee=Object(c.useState)("null"),te=Object(r.a)(ee,2),ae=te[0],ce=te[1],ne=Object(c.useState)("Chargement"),oe=Object(r.a)(ne,2),se=oe[0],re=oe[1],le=Object(c.useState)("var(--text-loading)"),ie=Object(r.a)(le,2),de=ie[0],be=ie[1],je=0,me=0,ue={autoClose:8e3,position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"},he="Une erreur s'est produite. Veuillez r\xe9essayer. Si l'erreur persite, contactez-nous.",fe={},pe={};Object(c.useEffect)((function(){Array.from(document.querySelectorAll('button[data-bs-toggle="popover"]')).forEach((function(e){return new S.a(e)})),Array.from(document.querySelectorAll(".toast")).forEach((function(e){return new S.b(e)})),Array.from(document.querySelectorAll('button[data-bs-toggle="tooltip"]')).forEach((function(e){return new S.c(e)}))}),[]),Object(c.useEffect)((function(){Oe(),xe()}),[]);var Oe=function(){var e={method:"GET",headers:{"Content-Type":"application/json"}};fetch("/api/grades",e).then((function(e){return e.json()})).then((function(t){fetch("/api/grades/members",e).then((function(e){return e.json()})).then((function(e){t.map((function(t){return t.members=e.filter((function(e){return e.id_grade===t.id_grade}))[0].members})),n(t)}))}))},xe=function(){fetch("/api/grades/colors",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){u(e)}))},ge=function(e,t){G(t),P(e)},ve=function(e,t){(e&&(ce("1px solid #ced4da"),J("")),t)&&(K(""),document.head.appendChild(document.createElement("style")).innerHTML="#empty:before {border:none}")},ye=function(){ve(!0,!0),ge("empty","var(--empty-color)"),$("")},Ne=function(e,t,a){be(e),re(t),O(e),y(t),k(a);fetch("/api/grades/".concat(a,"/cameras"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){d(e)}))},Ce=function(e){document.getElementById(e).click()},we=function(){je===Object.keys(fe).length&&me===Object.keys(pe).length&&(je=0,me=0,Ce("close-modify"),fe={},pe={},Oe(),Ne(p,v,w),_.b.success("Vous venez de modifier les actions des cam\xe9ras du grade "+v+" !",ue))};return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"row justify-content-center",children:[Object(l.jsxs)("div",{id:"desription-page",className:"row col-11 col-sm-10 col-md-9 col-lg-7",children:[Object(l.jsx)("div",{id:"title-description",className:"col-12",children:"Grades"}),Object(l.jsxs)("div",{id:"description",className:"col-12",children:["Cette page vous permet de cr\xe9er des grades, ",Object(l.jsx)("br",{})," ainsi que de voir les d\xe9tails de ces ",Object(l.jsx)("br",{})," derniers !"]})]}),a&&a.map((function(e){return Object(l.jsx)("div",{className:"col-12",onClick:function(){return Ne(e.color,e.name_grade,e.id_grade)},children:Object(l.jsx)(T,{name:e.name_grade,color:e.color,members:e.members,allowed_camera:e.allowedcamera,refused_camera:e.refusedcamera},"prop-".concat(e.id_grade))})})),Object(l.jsx)("div",{id:"layout-add",className:"row p-1 text-center justify-content-center col-12",children:Object(l.jsx)("span",{title:"Cr\xe9er un grade","data-toggle":"tooltip","data-placement":"top",children:Object(l.jsx)("i",{type:"button",className:"p-0 bi bi-plus-circle-fill add-user col-1","data-bs-toggle":"modal","data-bs-target":"#addGradeModal"})})})]}),Object(l.jsx)(A,{informationsCameras:i,colorModalDetails:de,titleModalDetails:se,activateButton:Ce,resetModal:function(){for(var e in i)i[e].id_camera in fe?document.getElementsByClassName("action-"+w+"-"+i[e].id_camera)[0].checked=fe[e]:document.getElementsByClassName("action-"+w+"-"+i[e].id_camera)[0].checked=i[e].allowed,i[e].id_camera in pe?document.getElementById("notification-"+w+"-"+i[e].id_camera).className=pe[e]?"bi bi-bell-fill":"bi bi-bell-slash-fill":document.getElementById("notification-"+w+"-"+i[e].id_camera).className=i[e].notification?"bi bi-bell-fill":"bi bi-bell-slash-fill"}}),Object(l.jsx)(I,{nameGrade:Z,borderGrade:ae,colorGrade:E,idColorGrade:H,colors:m,errorName:U,errorColor:X,setNameGrade:$,resetCreation:ye,createGrade:function(){var e=Z,t=H,c=!1,n=!1;(""===e?(ce("1px solid var(--error)"),J("Veuillez choisir un nom")):-1!==a.map((function(e){return e.name_grade})).indexOf(e)?(ce("1px solid var(--error)"),J("Ce nom existe d\xe9j\xe0")):(ve(!0,!1),c=!0),"empty"===t)?(K("Veuillez choisir une couleur"),document.head.appendChild(document.createElement("style")).innerHTML="#empty:before {border:1px solid red}"):(ve(!1,!0),n=!0);n&&c&&(ve(!0,!0),fetch("/api/grades",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({name:e,idcolor:t})}).then((function(e){return e.json()})).then((function(t){ye(),document.getElementById("cancel-creation").click(),"ok"===t.message?(Oe(),xe(),_.b.success("Vous venez de cr\xe9er le grade "+e+" !",ue)):_.b.error(he,ue)})))},chooseColor:ge}),Object(l.jsx)(F,{currentColor:p,currentIdGrade:w,currentGrade:v,informationsCameras:i,saveAction:function(){for(var e in fe){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({camera:e,action:fe[e]})};fetch("/api/grades/".concat(w,"/action"),t).then((function(e){return e.json()})).then((function(e){1===e.count?(je++,we()):_.b.error(he,ue)}))}for(var a in pe){var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({camera:a,notification:pe[a]})};fetch("/api/grades/".concat(w,"/notification"),c).then((function(e){return e.json()})).then((function(e){1===e.count?(me++,we()):_.b.error(he,ue)}))}},newNotifications:pe,newActions:fe,activateButton:Ce}),Object(l.jsx)(L,{activateButton:Ce,deleteModification:function(){Ce("close-cancel"),Ce("open-desc-grade-2"),fe={},pe={}}}),Object(l.jsx)(_.a,{style:{fontSize:"0.6rem"}})]})};a(336);var H=function(){var e=Object(c.useState)("http://0.0.0.0:6060/video"),t=Object(r.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(!1),s=Object(r.a)(o,2),i=(s[0],s[1],Object(c.useState)(null)),d=Object(r.a)(i,2),b=d[0],j=d[1],m=Object(c.useState)(null),u=Object(r.a)(m,2),h=u[0],f=u[1],p={autoClose:5e3,position:"bottom-right",hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,theme:"colored"};function O(){console.log("up"),fetch("http://0.0.0.0:6060/up",{headers:{"Access-Control-Allow-Origin":"*"},mode:"no-cors"}).then((function(e){return e.json})).then((function(e){n("http://0.0.0.0:6060/video")}))}function x(){console.log("\xe9teindre"),fetch("http://0.0.0.0:6060/shutdown",{headers:{"Access-Control-Allow-Origin":"*"},mode:"no-cors"}).then((function(e){return e.json})).then((function(e){n("camera-disconnected.png")}))}function g(e){document.getElementById(e).checked?O():x()}return Object(c.useEffect)((function(){fetch("/api/cameras",{headers:{"Access-Control-Allow-Origin":"*"},mode:"no-cors"}).then((function(e){return e.json()})).then((function(e){j(e)}))}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{class:"row align-items-center",children:Object(l.jsxs)("div",{class:"m-auto px-2",children:[Object(l.jsx)("h1",{children:"test"}),Object(l.jsxs)("section",{class:"streaming",children:[Object(l.jsx)("h3",{children:"Camera"}),Object(l.jsx)("div",{id:"changement",children:Object(l.jsx)("img",{id:"test",alt:"video surveillance",src:a,width:"640",height:"480"})})]}),Object(l.jsx)("button",{class:"btn btn-primary m-5",type:"button",onClick:function(){console.log("capture"),fetch("http://0.0.0.0:6060/photo",{headers:{"Access-Control-Allow-Origin":"*"},mode:"no-cors"}).then((function(e){return e.json})).then((function(e){fetch("/api/pictureScreenshoot",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){f(e.picture);var t=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("img",{class:"layout-screenshot","data-bs-toggle":"modal","data-bs-target":"#openscreenshotmodal",src:"image-client/".concat(e.picture),alt:"video surveillance",width:"100",height:"auto"})})};_.b.info(Object(l.jsx)(t,{}),p)}))}))},children:"prend photo"}),Object(l.jsx)("button",{class:"btn btn-primary m-5",onClick:O,type:"button",name:"start",value:"Eteindre",children:"up"}),Object(l.jsx)("button",{class:"btn btn-primary m-5",onClick:x,type:"button",name:"stop",value:"Eteindre",children:"\xc9teindre"}),b&&b.map((function(e){return Object(l.jsxs)("div",{class:"form-check form-switch",children:["ON"===e.name_status?Object(l.jsx)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:e.id_camera,defaultChecked:!0,onClick:function(){return g(e.id_camera)}}):"OFF"===e.name_status?Object(l.jsx)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:e.id_camera,onClick:function(){return g(e.id_camera)}}):Object(l.jsx)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:e.id_camera,disabled:!0}),Object(l.jsx)("label",{class:"form-check-label",for:e.id_camera,children:e.name_camera})]})}))]})}),Object(l.jsx)(_.a,{style:{fontSize:"0.6rem"}}),Object(l.jsx)("div",{id:"openscreenshotmodal",className:"modal fade","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"gradeModalLabel","aria-hidden":"true",children:Object(l.jsx)("div",{className:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",children:Object(l.jsx)("div",{className:"modal-content",children:Object(l.jsx)("div",{className:"modal-body",children:Object(l.jsx)("img",{class:"modal-screenshot",src:"image-client/".concat(h),alt:"video surveillance",width:"100%",height:"100%"})})})})})]})},P=a(42),q=(a(337),a(338),function(e){var t=e.nom,a=e.status,c=e.id;return Object(l.jsx)("div",{className:"col-2 col-md-2 col-sm-2 offset-4 offset-md-5 offset-sm-4 offset-lg-7 switchcam",children:Object(l.jsxs)("div",{className:"toggle-switch",children:[1===a?Object(l.jsx)("input",{type:"checkbox",className:"checkbox",id:c,defaultChecked:!0}):2===a?Object(l.jsx)("input",{type:"checkbox",className:"checkbox",id:c}):Object(l.jsx)("input",{type:"checkbox",className:"checkbox",id:t,disabled:!0,style:{backgroundColor:"grey"}}),Object(l.jsxs)("label",{className:"label",htmlFor:t,children:[Object(l.jsx)("span",{className:"inner"}),Object(l.jsx)("span",{className:"switch"})]})]})})});var D=function(){return Object(l.jsx)("div",{class:"modal fade",id:"ModalTarget","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(l.jsx)("div",{class:"modal-dialog",children:Object(l.jsxs)("div",{class:"modal-content",children:[Object(l.jsxs)("div",{class:"modal-header",children:[Object(l.jsx)("h5",{style:{color:"grey"},class:"modal-title",id:"staticBackdropLabel",children:"__Live__"}),Object(l.jsx)("button",{type:"button",class:" btn-secondary btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(l.jsx)("div",{class:"modal-body",children:Object(l.jsx)("img",{className:"img-thumbnail",alt:"visu_live",src:"http://0.0.0.0:6060/video",width:"440",height:"300",title:"Foscam FI8905W"})}),Object(l.jsxs)("div",{class:"modal-footer justify-content-center",children:[Object(l.jsx)("button",{type:"button",className:" col-3 btn btn-secondary",children:Object(l.jsx)("i",{className:"bi bi-camera-reels"})}),Object(l.jsx)("button",{type:"button",className:" col-3 btn btn-secondary",children:Object(l.jsx)("i",{className:"bi bi-camera"})})]})]})})})};var U=function(e){var t,a=e.idCam,c=e.nomCam,n=e.statusCam,o=e.nomStatus;return Object(l.jsx)("div",{children:1===n?Object(l.jsxs)("div",(t={"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Cliquez pour visionner le live",className:"row col-11 col-sm-9 col-md-7 col-lg-8 offset-sm-3 offset-md-4 offset-1 offset-lg-3 cadreBouton ".concat(o)},Object(P.a)(t,"data-bs-toggle","modal"),Object(P.a)(t,"data-bs-target","#ModalTarget"),Object(P.a)(t,"children",[Object(l.jsx)("div",{className:"col-1 col-md-1 col-sm-2",children:Object(l.jsx)("i",{class:"bi bi-camera-video"})}),Object(l.jsx)("div",{className:"col-3 col-sm-2 col-md-2 offset",children:c}),Object(l.jsx)(q,{nom:c,status:n,id:a}),Object(l.jsx)(D,{idName:o})]),t)):Object(l.jsxs)("div",{className:"row col-11 col-sm-9 col-md-7 col-lg-8 offset-sm-3 offset-md-4 offset-1 offset-lg-3 cadreBouton ".concat(o),children:[Object(l.jsx)("div",{className:"col-1 col-md-1 col-sm-2",children:Object(l.jsx)("i",{class:"bi bi-camera-video-off"})}),Object(l.jsx)("div",{className:"col-3 col-sm-2 col-md-2 offset",children:c}),Object(l.jsx)(q,{nom:c,status:n,id:a})]})})};a(339);var J=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){fetch("/api/camera",{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){return console.log(e),e.json()})).then((function(e){n(e)}))}),[]),Object(l.jsxs)("div",{className:"cam2",children:[Object(l.jsx)("div",{className:"titre offset-lg-5 offset-md-4 offset-sm-4 offset-2",children:"Page de gestion des cam\xe9ras"}),Object(l.jsx)("div",{class:"container",children:Object(l.jsx)("div",{className:"row",children:a&&a.map((function(e){return Object(l.jsx)("div",{children:Object(l.jsx)(U,{nomCam:e.name_camera,statusCam:e.id_status,idCam:e.id_camera,nomStatus:e.name_status})})}))})})]})};a(340);var R,W=function(){g.a.defaults.withCredentials=!0;var e=Object(c.useState)(""),t=Object(r.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(""),s=Object(r.a)(o,2),i=s[0],d=s[1],b=Object(c.useState)(""),m=Object(r.a)(b,2),u=m[0],h=m[1],f=Object(c.useState)([]),p=Object(r.a)(f,2),O=p[0],x=p[1];Object(c.useEffect)((function(){v()}),[]);var v=function(){g.a.get("/api/gradesInfos").then((function(e){x(e.data)})).then((function(){}))};return Object(l.jsx)("div",{className:"secretary-page",children:Object(l.jsx)("div",{id:"layout-user",children:Object(l.jsxs)(j.a,{trigger:Object(l.jsx)("button",{className:"add-user",children:"Ajouter utilisateur (+)"}),position:"center",modal:!0,nested:!0,children:[Object(l.jsx)("h1",{children:"Nouvel utilisateur:"}),Object(l.jsxs)("form",{onSubmit:function(){console.log("client : ",u),g.a.put("/api/client",{FirstName:a,LastName:i,Grade:u}).then((function(e){e&&window.alert("Client d\xe9j\xe0 enregistr\xe9")}))},children:[Object(l.jsx)("label",{for:"f-name",children:"Pr\xe9nom:"}),Object(l.jsx)("br",{}),Object(l.jsx)(w,{name:"f-name",idName:"f-name",max:"50",min:"1",type:"texte",placeholder:"Pr\xe9nom",setFunc:n}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{for:"l-name",children:"Nom:"}),Object(l.jsx)("br",{}),Object(l.jsx)(w,{name:"l-name",idName:"l-name",max:"50",min:"1",type:"texte",placeholder:"Nom",setFunc:d}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{for:"grade",children:"Grade:"}),Object(l.jsx)("br",{}),Object(l.jsx)("select",{onChange:function(e){h(e.target.value)},name:"grade",children:O.map((function(e){return Object(l.jsxs)("option",{value:e.id_grade,children:[e.id_grade+". ",e.name_grade]})}))}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",children:"Envoyer"}),Object(l.jsx)(N,{})]})]})})})},X=a(101),K=a(12),Q=a(126),Y=a.n(Q),Z=a(182),$=a(183),ee=a(191),te=(a(342),a(78)),ae=a(184),ce=a(185).a.div(R||(R=Object($.a)(["\n  width: 100px;\n  height: 100px;\n  overflow: hidden;\n  margin: 0px;\n  border-radius: 50%;\n  box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.1);\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n  \n"]))),ne={autoClose:4e3,position:"bottom-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"};var oe=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=(t[1],Object(c.useState)("")),o=Object(r.a)(n,2),s=(o[0],o[1]),i=Object(c.useState)(""),d=Object(r.a)(i,2),b=(d[0],d[1]),j=[],m=Object(c.useState)(""),u=Object(r.a)(m,2),h=u[0],f=u[1],p=Object(c.useState)([]),O=Object(r.a)(p,2),x=O[0],g=O[1],v=Object(c.useState)(""),y=Object(r.a)(v,2),N=y[0],C=y[1],w=Object(c.useState)(null),k=Object(r.a)(w,2),S=(k[0],k[1]),T=Object(c.useState)(null),M=Object(r.a)(T,2),z=M[0],I=M[1],E=Object(c.useState)(""),G=Object(r.a)(E,2),F=G[0],L=G[1],B=Object(c.useState)(""),A=Object(r.a)(B,2),V=A[0],H=A[1],P=Object(c.useState)(""),q=Object(r.a)(P,2),D=(q[0],q[1]),U=Object(c.useState)(0),J=Object(r.a)(U,2),R=J[0],W=J[1],X=Object(c.useState)(""),K=Object(r.a)(X,2),Q=K[0],$=K[1],oe=Object(c.useState)(null),se=Object(r.a)(oe,2),re=se[0],le=se[1],ie=function(e){fetch("/api/membres/".concat(e,"/grade"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){H(e[0].name_grade),L(e[0].color),D(e.id_grade),S(!0)}))},de=function(e){console.log(e);fetch("/api/membres/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e[0].first_name.replaceAll("\\s+",""),a=e[0].last_name.replaceAll("\\s+",""),c=t.replace(/\s+/g,"")+" "+a.replace(/\s+/g,"");c.replace(/\s+/g,""),s(t),b(a),f(c),S(!0)}))},be={},je=function(e){fetch("/api/membres/".concat(e,"/photos/count"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){I(e[0].count),S(!0)}))},me=function(e){fetch("/api/membres/".concat(e,"/photos"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){for(var t in g(e),e)j.push(e[t].pictures),C(e[0].pictures);S(!0)})),C(j[0])},ue=Object(l.jsx)(te.a,{id:"popover-basic",children:Object(l.jsx)(te.a.Body,{id:"popover-test",children:Object(l.jsx)("div",{class:"row",children:x.map((function(e){return Object(l.jsxs)("div",{class:" test col",children:[Object(l.jsx)("i",{class:"bi bi-x-circle-fill pr-2 mb-3",onClick:function(){return function(e){console.log(e),fetch("/api/membres/".concat(Q,"/eliminate/photo"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({photo:e})}).then((function(e){console.log(e),200===e.status?(_.b.success("Vous venez d'effacer la photo",ne),me(Q),je(Q)):_.b.error("Une erreur s'est produite. Veuillez r\xe9essayer. Si l'erreur persite, contactez-nous")}))}(e.pictures)}}),Object(l.jsx)("img",{class:"img-thumbnail h-50",src:e.pictures,alt:""})]})}))})})}),he=function(){var e=Object(Z.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$(t),de(t),ie(t),me(t),je(t),fetch("/api/grades",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){le(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(_.a,{style:{fontSize:"0.6rem"}}),Object(l.jsx)("button",{type:"button",onClick:function(){he(1)},class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",children:"User 1"}),Object(l.jsx)("button",{type:"button",onClick:function(){return he(2)},class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",children:"User 2"}),Object(l.jsx)("button",{type:"button",onClick:function(){return he(3)},class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",children:"User 3"}),Object(l.jsx)("div",{class:"modal fade",id:"staticBackdrop","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(l.jsx)("div",{class:"modal-dialog modal-dialog-centered",children:Object(l.jsxs)("div",{class:"modal-content",style:{backgroundColor:F},children:[Object(l.jsxs)("div",{class:"modal-body",children:[Object(l.jsx)("div",{class:"hovereffect",children:Object(l.jsxs)("div",{class:"row",children:[Object(l.jsx)("div",{class:"col",children:Object(l.jsxs)(ce,{children:[Object(l.jsx)("img",{src:N,alt:""}),Object(l.jsx)(ee.a,{trigger:"click",placement:"right",overlay:ue,children:Object(l.jsx)("span",{className:"badge nineplus",children:z})})]})}),Object(l.jsx)("div",{class:"col"})]})}),Object(l.jsx)("div",{class:"tool",children:0===R?Object(l.jsxs)("p",{class:"affiche",children:[" ",V.toUpperCase()," ",Object(l.jsx)("i",{onClick:function(){W(1),re.map((function(e){return be[e.name_grade]=e.color.replace(/\s+/g,"")})),V in be&&delete be[V]},className:"bi bi-pencil-square",style:{color:"white",background:F,backgroundSize:"10px",fontSize:"80%",textAlign:"right",paddingRight:"10px ",paddingLeft:"4px"}})]}):re.map((function(e){return e.name_grade!==V?Object(l.jsx)("i",{onClick:function(){var t;t=e.id_grade,fetch("/api/membres/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userNow:Q})}).then((function(e){console.log(e),200===e.status?_.b.success("Vous venez de modifier le grade de l'utilisateur",ne):_.b.error("Une erreur s'est produite. Veuillez r\xe9essayer. Si l'erreur persite, contactez-nous")})),he(Q),W(0)},className:"bi bi-person-square",style:{color:e.color,border:"10px black",fontSize:"100%",background:F,textAlign:"right",paddingRight:"20px"}},e.name_grade):""}))})]}),Object(l.jsx)("div",{class:"col-12",children:Object(l.jsx)(ae.a,{value:h,type:"text",onSave:function(e){var t=e.split(/(\s+)/).filter((function(e){return e.trim().length>0})),a=t[0],c=t[1];fetch("/api/membres/".concat(Q,"/update"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,surname:c})}).then((function(e){console.log(e),200===e.status?_.b.success("Vous venez de modifier le nom et pr\xe9nom de cet utilisateur",ne):_.b.error("Une erreur s'est produite. Veuillez r\xe9essayer. Si l'erreur persite, contactez-nous")}))},editing:a,buttonsAlign:"before"})})]})})})]})};var se=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(""),s=Object(r.a)(o,2),i=s[0],d=s[1],b=Object(c.useState)(0),j=Object(r.a)(b,2);return j[0],j[1],Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(l.jsxs)("div",{class:"mb-3",children:[Object(l.jsx)("label",{for:"exampleInputEmail1",class:"form-label",children:"Nom d'utilisateuuuuuuuur"}),Object(l.jsx)("input",{type:"text",placeholder:"toto",value:a,onChange:function(e){return n(e.target.value)},class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]}),Object(l.jsxs)("div",{class:"mb-3",children:[Object(l.jsx)("label",{for:"exampleInputPassword1",class:"form-label",children:"Password"}),Object(l.jsx)("input",{type:"password",placeholder:"",value:i,onChange:function(e){return d(e.target.value)},class:"form-control",id:"exampleInputPassword1"})]}),Object(l.jsx)("button",{onClick:function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:i})};fetch("/api/login",e).then((function(e){return e.json()})).then((function(e){console.log(e.value),e.value&&(localStorage.setItem("access_token",e.value),null!==localStorage.getItem("access_token")&&"undefined"!==localStorage.getItem("access_token")&&window.location.replace("/grades"))}))},class:"btn btn-primary",children:"Connecter"}),Object(l.jsx)("br",{})]})})})};function re(){return null!==localStorage.getItem("access_token")&&"undefined"!==localStorage.getItem("access_token")}var le=a(5),ie=a(25),de=["component"],be=function(e){var t=e.component,a=Object(ie.a)(e,de);return Object(l.jsx)(K.b,Object(le.a)(Object(le.a)({},a),{},{render:function(e){return re()?Object(l.jsx)(t,Object(le.a)({},e)):Object(l.jsx)(K.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var je=function(){return re()?Object(l.jsx)(X.a,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(b,{}),Object(l.jsx)("div",{className:"content",children:Object(l.jsxs)(K.d,{children:[Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:V,path:"/grades"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:H,path:"/camera"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:J,path:"/accueil"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:W,path:"/secretary"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:k,path:"/members"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:J,path:"/home"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),path:"/modification",component:oe}),Object(l.jsx)(K.b,{path:"/login",exact:!0,component:se})]})})]})}):Object(l.jsx)(X.a,{children:Object(l.jsx)("div",{className:"App",children:Object(l.jsx)("div",{className:"content",children:Object(l.jsxs)(K.d,{children:[Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:V,path:"/grades"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:H,path:"/camera"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:J,path:"/accueil"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:W,path:"/secretary"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:k,path:"/members"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),component:J,path:"/home"}),Object(l.jsx)(be,{exact:!0,isloggedin:re(),path:"/modification",component:oe}),Object(l.jsx)(K.b,{path:"/login",exact:!0,component:se})]})})})})},me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,355)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,o=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),o(e),s(e)}))};s.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(je,{})}),document.getElementById("root")),me()},37:function(e,t,a){}},[[349,1,2]]]);
//# sourceMappingURL=main.56216944.chunk.js.map